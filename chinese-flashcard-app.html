<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#1565c0">
    <meta name="description" content="Study Chinese with interactive flashcards">
    <link rel="manifest" href="./manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Flashcards">
    <title>Chinese Flashcard App</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding: 20px;
        }

        #app { width: 100%; max-width: 600px; }

        .header { text-align: center; margin-bottom: 24px; color: #1565c0; }
        .title { font-size: 32px; font-weight: bold; margin-bottom: 12px; text-shadow: 1px 1px 2px rgba(0,0,0,0.1); }

        .card-selector { display: flex; align-items: center; justify-content: center; gap: 10px; }
        .selector-label { font-size: 16px; font-weight: 500; color: #1565c0; }
        .dropdown {
            padding: 8px 14px; font-size: 15px; font-weight: 500;
            background: white; border: 2px solid #42a5f5; border-radius: 8px;
            cursor: pointer; color: #1565c0; outline: none; max-width: 220px;
        }

        .card {
            width: 100%; min-height: 300px;
            background: white; border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            cursor: pointer; transition: background 0.3s ease;
            margin-bottom: 16px;
            user-select: none; -webkit-user-select: none; touch-action: pan-y;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            padding: 36px 30px; text-align: center;
        }
        .card.flipped { background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%); }

        .card-label { font-size: 11px; font-weight: bold; color: #aaa; letter-spacing: 2px; margin-bottom: 18px; }
        .card-english { font-size: 30px; color: #2d3436; font-weight: 500; line-height: 1.3; }
        .card-chinese { font-size: 36px; font-weight: bold; color: #2d3436; margin-bottom: 14px; line-height: 1.3; }
        .card-pinyin { font-size: 26px; font-style: italic; color: #555; line-height: 1.4; }
        .card-hint { font-size: 13px; color: #ccc; margin-top: 20px; }

        .nav-buttons { display: flex; gap: 14px; margin-bottom: 14px; }
        .nav-btn {
            flex: 1; padding: 14px; font-size: 16px; font-weight: bold;
            background: white; border: none; border-radius: 12px; cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.15); color: #1565c0;
            transition: transform 0.1s, box-shadow 0.1s;
        }
        .nav-btn:active { transform: scale(0.97); box-shadow: 0 2px 8px rgba(0,0,0,0.12); }

        .vocab-btn {
            width: 100%; padding: 14px; font-size: 16px; font-weight: bold;
            background: white; border: none; border-radius: 12px; cursor: pointer;
            margin-bottom: 14px; box-shadow: 0 4px 15px rgba(0,0,0,0.15);
            color: #1565c0; transition: transform 0.1s;
        }
        .vocab-btn:active { transform: scale(0.98); }

        .vocab-section { background: white; border-radius: 15px; padding: 22px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); display: none; }
        .vocab-section.visible { display: block; }

        .vocab-title { font-size: 18px; font-weight: bold; color: #2d3436; margin-bottom: 14px; border-bottom: 3px solid #42a5f5; padding-bottom: 10px; }
        .vocab-item { padding: 10px 12px; background: #f8f9fa; margin-bottom: 8px; border-radius: 8px; border-left: 4px solid #42a5f5; font-size: 15px; line-height: 1.5; }
        .vocab-hanzi { font-weight: bold; color: #2d3436; font-size: 17px; }
        .vocab-pinyin { font-style: italic; color: #636e72; margin-left: 4px; }
        .vocab-meaning { color: #2d3436; }
        .grammar-note { margin-top: 14px; padding: 14px; background: #e3f2fd; border-radius: 8px; font-size: 14px; line-height: 1.6; color: #333; }
        
        .settings-btn { position: fixed; top: 20px; left: 20px; width: 56px; height: 56px; border-radius: 50%; background: #1565c0; color: white; border: none; font-size: 24px; cursor: pointer; box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 1000; transition: transform 0.2s; }
        .settings-btn:active { transform: scale(0.95); }
        
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.6); z-index: 1001; justify-content: center; align-items: center; }
        .modal-overlay.visible { display: flex; }
        
        .modal { background: white; border-radius: 16px; padding: 24px; max-width: 400px; width: 90%; box-shadow: 0 8px 32px rgba(0,0,0,0.3); }
        .modal-title { font-size: 22px; font-weight: bold; color: #1565c0; margin-bottom: 20px; text-align: center; }
        .modal-btn { width: 100%; padding: 14px; margin: 8px 0; font-size: 15px; font-weight: bold; border: none; border-radius: 10px; cursor: pointer; transition: transform 0.1s; }
        .modal-btn:active { transform: scale(0.98); }
        .modal-btn.danger { background: #f44336; color: white; }
        .modal-btn.primary { background: #1565c0; color: white; }
        .modal-btn.secondary { background: #e0e0e0; color: #333; }
        .modal-info { font-size: 13px; color: #666; padding: 12px; background: #f5f5f5; border-radius: 8px; margin: 12px 0; line-height: 1.5; }
        
        .progress-bar { background: white; border-radius: 12px; padding: 16px; margin-bottom: 16px; box-shadow: 0 4px 15px rgba(0,0,0,0.15); }
        .progress-bar-inner { background: #e0e0e0; border-radius: 8px; height: 24px; overflow: hidden; position: relative; }
        .progress-bar-fill { background: linear-gradient(90deg, #4CAF50 0%, #81C784 100%); height: 100%; transition: width 0.3s ease; display: flex; align-items: center; justify-content: center; }
        .progress-text { position: absolute; width: 100%; text-align: center; font-size: 13px; font-weight: bold; color: #333; line-height: 24px; }
        
        .filter-buttons { display: flex; gap: 8px; margin-bottom: 16px; }
        .filter-btn { flex: 1; padding: 10px; font-size: 14px; font-weight: 600; background: white; border: 2px solid #42a5f5; border-radius: 10px; cursor: pointer; color: #1565c0; transition: all 0.2s; }
        .filter-btn.active { background: #42a5f5; color: white; }
        .filter-btn:active { transform: scale(0.97); }
        
        .learned-toggle { background: #4CAF50; color: white; border: none; padding: 12px; border-radius: 10px; font-size: 14px; font-weight: bold; cursor: pointer; margin-bottom: 14px; width: 100%; box-shadow: 0 4px 15px rgba(0,0,0,0.15); transition: all 0.2s; }
        .learned-toggle.learned { background: #FF9800; }
        .learned-toggle:active { transform: scale(0.98); }
        
        .install-prompt { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 16px; border-radius: 12px; margin-bottom: 16px; text-align: center; display: none; }
        .install-prompt.visible { display: block; }
        .install-btn { background: white; color: #667eea; border: none; padding: 10px 20px; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        
        .help-banner { background: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%); color: white; padding: 12px 16px; border-radius: 10px; margin-bottom: 16px; font-size: 13px; line-height: 1.5; }
        .help-banner strong { display: block; margin-bottom: 4px; font-size: 14px; }
        .close-help { background: rgba(255,255,255,0.3); border: none; color: white; padding: 4px 12px; border-radius: 6px; margin-top: 8px; cursor: pointer; font-size: 12px; }
    </style>
</head>
<body>
<div id="app">
    <div id="helpBanner" class="help-banner">
        <strong>ðŸ’¡ Tip: Add to Home Screen</strong>
        In Chrome: Tap â‹® (menu) â†’ "Add to Home screen" to create an app icon!<br>
        Your learning progress auto-saves.
        <button class="close-help" id="closeHelp">Got it</button>
    </div>

    <div class="header">
        <div class="title">&#127924; Chinese Flashcards</div>
        
        <div class="filter-buttons">
            <button class="filter-btn active" id="filterAll">All Cards</button>
            <button class="filter-btn" id="filterUnlearned">Unlearned</button>
            <button class="filter-btn" id="filterLearned">Learned</button>
        </div>
        
        <div class="card-selector">
            <span class="selector-label">Jump to card:</span>
            <select class="dropdown" id="cardSelect"></select>
        </div>
    </div>

    <div class="card" id="flashcard">
        <div class="card-label" id="cardLabel">FRONT</div>
        <div id="cardMain"></div>
        <div class="card-hint" id="cardHint">Click or swipe to flip</div>
    </div>

    <div class="nav-buttons">
        <button class="nav-btn" id="prevBtn">&#8592; Previous</button>
        <button class="nav-btn" id="nextBtn">Next &#8594;</button>
    </div>

    <button class="learned-toggle" id="learnedToggle">âœ“ Mark as Learned</button>

    <button class="vocab-btn" id="vocabBtn">&#128218; Show Vocabulary Notes</button>

    <div class="vocab-section" id="vocabSection">
        <div class="vocab-title">Vocabulary Breakdown</div>
        <div id="vocabItems"></div>
        <div class="grammar-note" id="grammarNote"></div>
    </div>
</div>

<button class="settings-btn" id="settingsBtn">&#9881;</button>

<div class="modal-overlay" id="modalOverlay">
    <div class="modal">
        <div class="modal-title">&#9881; Settings</div>
        
        <div class="modal-info">
            <strong>Learned Cards:</strong> <span id="learnedCount">0</span> cards marked as learned
        </div>
        
        <button class="modal-btn danger" id="clearProgressBtn">
            &#128465; Clear All Progress
        </button>
        
        <button class="modal-btn primary" id="refreshAppBtn">
            &#8635; Refresh to Latest Version
        </button>
        
        <div class="modal-info" style="font-size: 12px;">
            <strong>Refresh:</strong> Updates the app to the latest version and clears the cache. Your learned progress will be preserved.
        </div>
        
        <button class="modal-btn secondary" id="closeModalBtn">
            Close
        </button>
    </div>
</div>

<script>
// Note: PWA installation requires HTTPS or localhost server
// To enable "Add to Home Screen", serve this via HTTP server
// See run-server.py for instructions

// Help banner
var helpBanner = document.getElementById('helpBanner');
var closeHelp = document.getElementById('closeHelp');

if (localStorage.getItem('helpDismissed')) {
    helpBanner.style.display = 'none';
}

closeHelp.addEventListener('click', function() {
    helpBanner.style.display = 'none';
    localStorage.setItem('helpDismissed', 'true');
});

// Settings Modal
var settingsBtn = document.getElementById('settingsBtn');
var modalOverlay = document.getElementById('modalOverlay');
var closeModalBtn = document.getElementById('closeModalBtn');
var clearProgressBtn = document.getElementById('clearProgressBtn');
var refreshAppBtn = document.getElementById('refreshAppBtn');
var learnedCountDisplay = document.getElementById('learnedCount');

settingsBtn.addEventListener('click', function() {
    // Update learned count from storage
    var currentLearned = JSON.parse(localStorage.getItem('learnedCards') || '{}');
    learnedCountDisplay.textContent = Object.keys(currentLearned).length;
    modalOverlay.classList.add('visible');
});

closeModalBtn.addEventListener('click', function() {
    modalOverlay.classList.remove('visible');
});

// Close modal when clicking outside
modalOverlay.addEventListener('click', function(e) {
    if (e.target === modalOverlay) {
        modalOverlay.classList.remove('visible');
    }
});

clearProgressBtn.addEventListener('click', function() {
    if (confirm('Are you sure you want to clear all learned progress? This cannot be undone.')) {
        localStorage.removeItem('learnedCards');
        learnedCards = {};
        updateFilteredIndices();
        render();
        learnedCountDisplay.textContent = '0';
        alert('All progress has been cleared!');
        modalOverlay.classList.remove('visible');
    }
});

refreshAppBtn.addEventListener('click', function() {
    if (confirm('This will refresh the app to the latest version. Your learned progress will be preserved. Continue?')) {
        // Unregister service workers
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.getRegistrations().then(function(registrations) {
                for (var i = 0; i < registrations.length; i++) {
                    registrations[i].unregister();
                }
            });
        }
        
        // Clear all caches
        if ('caches' in window) {
            caches.keys().then(function(names) {
                for (var i = 0; i < names.length; i++) {
                    caches.delete(names[i]);
                }
            });
        }
        
        // Force reload from server
        setTimeout(function() {
            window.location.reload(true);
        }, 500);
    }
});

var cards = [
    {
        chinese: "\u4ECA\u5929\u6211\u6CA1\u505A\u4EC0\u4E48\u3002",
        pinyin: "J\u012Bnti\u0101n w\u01D2 m\u00E9i zu\u00F2 sh\u00E9nme.",
        english: "I didn't do much today.",
        vocabulary: [
            { hanzi: "\u4ECA\u5929", pinyin: "j\u012Bnti\u0101n", meaning: "today" },
            { hanzi: "\u6211", pinyin: "w\u01D2", meaning: "I, me" },
            { hanzi: "\u6CA1", pinyin: "m\u00E9i", meaning: "not (negation for past actions)" },
            { hanzi: "\u505A", pinyin: "zu\u00F2", meaning: "do, make" },
            { hanzi: "\u4EC0\u4E48", pinyin: "sh\u00E9nme", meaning: "what, anything" }
        ],
        grammarNote: "æ²¡ (mÃ©i) is used to negate past actions. The structure 'æ²¡åšä»€ä¹ˆ' literally means 'didn't do what/anything' which translates to 'didn't do much.'"
    },
    {
        chinese: "\u4F60\u5B66\u4E60\u4E2D\u6587\u591A\u957F\u65F6\u95F4\u4E86\uFF1F",
        pinyin: "N\u01D0 xu\u00E9x\u00ED zh\u014Dngw\u00E9n du\u014Dch\u00E1ng sh\u00EDji\u0101n le?",
        english: "How long have you been learning Chinese?",
        vocabulary: [
            { hanzi: "\u4F60", pinyin: "n\u01D0", meaning: "you" },
            { hanzi: "\u5B66\u4E60", pinyin: "xu\u00E9x\u00ED", meaning: "to study, to learn" },
            { hanzi: "\u4E2D\u6587", pinyin: "zh\u014Dngw\u00E9n", meaning: "Chinese (language)" },
            { hanzi: "\u591A\u957F\u65F6\u95F4", pinyin: "du\u014Dch\u00E1ng sh\u00EDji\u0101n", meaning: "how long (duration)" },
            { hanzi: "\u4E86", pinyin: "le", meaning: "particle indicating change or completion" }
        ],
        grammarNote: "The structure 'å¤šé•¿æ—¶é—´' asks about duration. The particle 'äº†' at the end suggests an action that started in the past and continues to the present. This pattern is used to ask 'how long have you been doing something?'"
    },
    {
        chinese: "\u4F60\u89C9\u5F97\u4E2D\u56FD\u600E\u4E48\u6837\uFF1F",
        pinyin: "N\u01D0 ju\u00E9de zh\u014Dnggu\u00F3 z\u011Bnmey\u00E0ng?",
        english: "What do you think about China?",
        vocabulary: [
            { hanzi: "\u4F60", pinyin: "n\u01D0", meaning: "you" },
            { hanzi: "\u89C9\u5F97", pinyin: "ju\u00E9de", meaning: "to feel, to think" },
            { hanzi: "\u4E2D\u56FD", pinyin: "zh\u014Dnggu\u00F3", meaning: "China" },
            { hanzi: "\u600E\u4E48\u6837", pinyin: "z\u011Bnmey\u00E0ng", meaning: "how about, what do you think" }
        ],
        grammarNote: "The phrase 'è§‰å¾—...æ€Žä¹ˆæ ·' is used to ask for someone's opinion or impression. 'æ€Žä¹ˆæ ·' literally means 'how is it' and is commonly used to ask 'what do you think about...' or 'how is...'"
    },
    {
        chinese: "\u4F60\u53EF\u4EE5\u4ECB\u7ECD\u4E00\u4E0B\u81EA\u5DF1\u5417\uFF1F",
        pinyin: "N\u01D0 k\u011By\u01D0 ji\u00E8sh\u00E0o y\u00EDxi\u00E0 z\u00ECj\u01D0 ma?",
        english: "Can you introduce yourself?",
        vocabulary: [
            { hanzi: "\u4F60", pinyin: "n\u01D0", meaning: "you" },
            { hanzi: "\u53EF\u4EE5", pinyin: "k\u011By\u01D0", meaning: "can, may" },
            { hanzi: "\u4ECB\u7ECD", pinyin: "ji\u00E8sh\u00E0o", meaning: "to introduce" },
            { hanzi: "\u4E00\u4E0B", pinyin: "y\u00EDxi\u00E0", meaning: "a bit (softens the request)" },
            { hanzi: "\u81EA\u5DF1", pinyin: "z\u00ECj\u01D0", meaning: "oneself" },
            { hanzi: "\u5417", pinyin: "ma", meaning: "question particle" }
        ],
        grammarNote: "'ä¸€ä¸‹' is used after verbs to soften requests and make them more casual. It literally means 'one time' but functionally makes the request less direct and more polite."
    },
    {
        chinese: "\u6211\u4E0D\u592A\u660E\u767D\u4F60\u7684\u610F\u601D\u3002",
        pinyin: "W\u01D2 b\u00FA t\u00E0i m\u00EDngb\u00E1i n\u01D0 de y\u00ECsi.",
        english: "I do not quite understand what you mean.",
        vocabulary: [
            { hanzi: "\u6211", pinyin: "w\u01D2", meaning: "I, me" },
            { hanzi: "\u4E0D\u592A", pinyin: "b\u00FA t\u00E0i", meaning: "not very, not quite" },
            { hanzi: "\u660E\u767D", pinyin: "m\u00EDngb\u00E1i", meaning: "to understand" },
            { hanzi: "\u4F60\u7684", pinyin: "n\u01D0 de", meaning: "your" },
            { hanzi: "\u610F\u601D", pinyin: "y\u00ECsi", meaning: "meaning, intention" }
        ],
        grammarNote: "'ä¸å¤ª' means 'not very' or 'not quite' and softens the negation. This is more polite than saying 'ä¸æ˜Žç™½' (don't understand). The structure 'çš„æ„æ€' means 'the meaning of' or 'what...means'."
    },
    {
        chinese: "\u4ECA\u5929\u6211\u4E00\u76F4\u5728\u5DE5\u4F5C\u3002",
        pinyin: "J\u012Bnti\u0101n w\u01D2 y\u00ECzh\u00ED z\u00E0i g\u014Dngzu\u00F2.",
        english: "I have been working all day today.",
        vocabulary: [
            { hanzi: "\u4ECA\u5929", pinyin: "j\u012Bnti\u0101n", meaning: "today" },
            { hanzi: "\u6211", pinyin: "w\u01D2", meaning: "I, me" },
            { hanzi: "\u4E00\u76F4", pinyin: "y\u00ECzh\u00ED", meaning: "all along, continuously" },
            { hanzi: "\u5728", pinyin: "z\u00E0i", meaning: "at, in (indicates ongoing action)" },
            { hanzi: "\u5DE5\u4F5C", pinyin: "g\u014Dngzu\u00F2", meaning: "to work, work" }
        ],
        grammarNote: "'ä¸€ç›´åœ¨' indicates a continuous action that has been happening for a period of time. The pattern 'ä¸€ç›´åœ¨ + verb' means 'have been continuously doing something'."
    },
    {
        chinese: "\u6211\u5DEE\u4E0D\u591A\u6BCF\u5929\u90FD\u4F1A\u8FD0\u52A8\u3002",
        pinyin: "W\u01D2 ch\u00E0b\u00F9du\u014D m\u011Biti\u0101n d\u014Du hu\u00EC y\u00F9nd\u00F2ng.",
        english: "I exercise almost every day.",
        vocabulary: [
            { hanzi: "\u6211", pinyin: "w\u01D2", meaning: "I, me" },
            { hanzi: "\u5DEE\u4E0D\u591A", pinyin: "ch\u00E0b\u00F9du\u014D", meaning: "almost, nearly" },
            { hanzi: "\u6BCF\u5929", pinyin: "m\u011Biti\u0101n", meaning: "every day" },
            { hanzi: "\u90FD", pinyin: "d\u014Du", meaning: "all, both" },
            { hanzi: "\u4F1A", pinyin: "hu\u00EC", meaning: "will, can" },
            { hanzi: "\u8FD0\u52A8", pinyin: "y\u00F9nd\u00F2ng", meaning: "to exercise, sports" }
        ],
        grammarNote: "'å·®ä¸å¤š' means 'almost' or 'nearly'. The pattern 'éƒ½ä¼š' emphasizes regularity or habitual action. Together with 'æ¯å¤©', it expresses 'almost every day'."
    },
    {
        chinese: "\u90A3\u4E2A\u8BCD\u600E\u4E48\u8BF4\u6765\u7740\uFF1F",
        pinyin: "N\u00E0g\u00E8 c\u00ED z\u011Bnme shu\u014D l\u00E1izhe?",
        english: "How do you say that word again?",
        vocabulary: [
            { hanzi: "\u90A3\u4E2A", pinyin: "n\u00E0g\u00E8", meaning: "that" },
            { hanzi: "\u8BCD", pinyin: "c\u00ED", meaning: "word" },
            { hanzi: "\u600E\u4E48", pinyin: "z\u011Bnme", meaning: "how" },
            { hanzi: "\u8BF4", pinyin: "shu\u014D", meaning: "to say, to speak" },
            { hanzi: "\u6765\u7740", pinyin: "l\u00E1izhe", meaning: "particle indicating recall (again)" }
        ],
        grammarNote: "'æ¥ç€' is used at the end of questions to indicate trying to recall something. It's like saying 'again' or 'what was it' in English when you're trying to remember."
    },
    {
        chinese: "\u6211\u5728\u90A3\u91CC\u4E00\u4E2A\u670B\u53CB\u4E5F\u6CA1\u6709\u3002",
        pinyin: "W\u01D2 z\u00E0i n\u00E0l\u01D0 y\u00EDg\u00E8 p\u00E9ngy\u01D2u y\u011B m\u00E9iy\u01D2u.",
        english: "I don't have a single friend there.",
        vocabulary: [
            { hanzi: "\u6211", pinyin: "w\u01D2", meaning: "I, me" },
            { hanzi: "\u5728\u90A3\u91CC", pinyin: "z\u00E0i n\u00E0l\u01D0", meaning: "there, over there" },
            { hanzi: "\u4E00\u4E2A", pinyin: "y\u00EDg\u00E8", meaning: "one, a" },
            { hanzi: "\u670B\u53CB", pinyin: "p\u00E9ngy\u01D2u", meaning: "friend" },
            { hanzi: "\u4E5F", pinyin: "y\u011B", meaning: "also, even" },
            { hanzi: "\u6CA1\u6709", pinyin: "m\u00E9iy\u01D2u", meaning: "don't have, not have" }
        ],
        grammarNote: "The pattern 'ä¸€ä¸ª...ä¹Ÿæ²¡æœ‰' means 'not even one' or 'not a single'. The 'ä¹Ÿ' emphasizes the complete absence. It's a strong way to say you don't have any at all."
    },
    {
        chinese: "\u8BED\u6CD5\u4E0D\u662F\u5F88\u96BE\uFF0C\u4F46\u662F\u53D1\u97F3\u5F88\u96BE\u3002",
        pinyin: "Y\u01D4f\u01CE b\u00FAsh\u00EC h\u011Bn n\u00E1n, d\u00E0nsh\u00EC f\u0101y\u012Bn h\u011Bn n\u00E1n.",
        english: "Grammar is not very difficult, but pronunciation is difficult.",
        vocabulary: [
            { hanzi: "\u8BED\u6CD5", pinyin: "y\u01D4f\u01CE", meaning: "grammar" },
            { hanzi: "\u4E0D\u662F\u5F88", pinyin: "b\u00FAsh\u00EC h\u011Bn", meaning: "not very" },
            { hanzi: "\u96BE", pinyin: "n\u00E1n", meaning: "difficult, hard" },
            { hanzi: "\u4F46\u662F", pinyin: "d\u00E0nsh\u00EC", meaning: "but, however" },
            { hanzi: "\u53D1\u97F3", pinyin: "f\u0101y\u012Bn", meaning: "pronunciation" },
            { hanzi: "\u5F88", pinyin: "h\u011Bn", meaning: "very" }
        ],
        grammarNote: "'ä¸æ˜¯å¾ˆ' is a softer negation meaning 'not very' rather than an absolute 'not'. 'ä½†æ˜¯' connects two contrasting clauses. This structure is useful for making comparisons or contrasts."
    },
    {
        chinese: "\u4ED6\u4EEC\u8BF4\u5F97\u592A\u5FEB\u4E86\u3002",
        pinyin: "T\u0101men shu\u014D de t\u00E0i ku\u00E0ile.",
        english: "They speak too fast.",
        vocabulary: [
            { hanzi: "\u4ED6\u4EEC", pinyin: "t\u0101men", meaning: "they, them" },
            { hanzi: "\u8BF4", pinyin: "shu\u014D", meaning: "to speak, to say" },
            { hanzi: "\u5F97", pinyin: "de", meaning: "particle indicating degree/result" },
            { hanzi: "\u592A", pinyin: "t\u00E0i", meaning: "too, excessively" },
            { hanzi: "\u5FEB", pinyin: "ku\u00E0i", meaning: "fast, quick" },
            { hanzi: "\u4E86", pinyin: "le", meaning: "particle indicating change/excessive degree" }
        ],
        grammarNote: "The pattern 'verb + å¾— + adjective' describes how an action is performed. 'å¤ª...äº†' means 'too...' expressing that something is excessive. Together, 'è¯´å¾—å¤ªå¿«äº†' means 'speak too fast'."
    },
    {
        chinese: "\u4F60\u8BF4\u5F97\u6BD4\u6211\u597D\u591A\u4E86\u3002",
        pinyin: "N\u01D0 shu\u014D de b\u01D0 w\u01D2 h\u01CEodu\u014Dle.",
        english: "You speak much better than I do.",
        vocabulary: [
            { hanzi: "\u4F60", pinyin: "n\u01D0", meaning: "you" },
            { hanzi: "\u8BF4", pinyin: "shu\u014D", meaning: "to speak" },
            { hanzi: "\u5F97", pinyin: "de", meaning: "particle indicating result/degree" },
            { hanzi: "\u6BD4", pinyin: "b\u01D0", meaning: "than, compared to" },
            { hanzi: "\u6211", pinyin: "w\u01D2", meaning: "I, me" },
            { hanzi: "\u597D\u591A\u4E86", pinyin: "h\u01CEodu\u014Dle", meaning: "much better" }
        ],
        grammarNote: "The pattern 'æ¯” + noun/pronoun' is used for comparisons. 'å¥½å¤šäº†' means 'much better'. The structure 'A æ¯” B + adjective' means 'A is more [adjective] than B'."
    },
    {
        chinese: "\u8FD9\u7BC7\u6587\u7AE0\u8FD8\u86EE\u6709\u610F\u601D\u7684\u3002",
        pinyin: "Zh\u00E8 pi\u0101n w\u00E9nzh\u0101ng h\u00E1i m\u00E1n y\u01D2uy\u00ECsi de.",
        english: "This article is quite interesting.",
        vocabulary: [
            { hanzi: "\u8FD9\u7BC7", pinyin: "zh\u00E8 pi\u0101n", meaning: "this (measure word for articles/essays)" },
            { hanzi: "\u6587\u7AE0", pinyin: "w\u00E9nzh\u0101ng", meaning: "article, essay" },
            { hanzi: "\u8FD8", pinyin: "h\u00E1i", meaning: "quite, fairly" },
            { hanzi: "\u86EE", pinyin: "m\u00E1n", meaning: "quite, pretty (colloquial)" },
            { hanzi: "\u6709\u610F\u601D", pinyin: "y\u01D2uy\u00ECsi", meaning: "interesting, fun" },
            { hanzi: "\u7684", pinyin: "de", meaning: "particle (emphasis)" }
        ],
        grammarNote: "'è¿˜è›®' is a colloquial way to say 'quite' or 'pretty'. 'æœ‰æ„æ€' literally means 'have meaning' but is used to say something is interesting or fun. The final 'çš„' adds emphasis."
    },
    {
        chinese: "\u8FD9\u4E2A\u6211\u4E0D\u592A\u6E05\u695A\u3002",
        pinyin: "Zh\u00E8ge w\u01D2 b\u00FA t\u00E0i q\u012Bngch\u01D4.",
        english: "I'm not sure about this.",
        vocabulary: [
            { hanzi: "\u8FD9\u4E2A", pinyin: "zh\u00E8ge", meaning: "this" },
            { hanzi: "\u6211", pinyin: "w\u01D2", meaning: "I, me" },
            { hanzi: "\u4E0D\u592A", pinyin: "b\u00FA t\u00E0i", meaning: "not very, not quite" },
            { hanzi: "\u6E05\u695A", pinyin: "q\u012Bngch\u01D4", meaning: "clear, sure" }
        ],
        grammarNote: "'ä¸å¤ªæ¸…æ¥š' is a polite way to say you're not sure or don't know something clearly. It's softer than saying 'ä¸çŸ¥é“' (don't know). The word order places the topic 'è¿™ä¸ª' at the beginning."
    },
    {
        chinese: "\u4F60\u77E5\u9053\u6211\u7684\u610F\u601D\u5417\uFF1F",
        pinyin: "N\u01D0 zh\u012Bd\u00E0o w\u01D2 de y\u00ECsi ma?",
        english: "Do you know what I mean?",
        vocabulary: [
            { hanzi: "\u4F60", pinyin: "n\u01D0", meaning: "you" },
            { hanzi: "\u77E5\u9053", pinyin: "zh\u012Bd\u00E0o", meaning: "to know, to understand" },
            { hanzi: "\u6211\u7684", pinyin: "w\u01D2 de", meaning: "my" },
            { hanzi: "\u610F\u601D", pinyin: "y\u00ECsi", meaning: "meaning, intention" },
            { hanzi: "\u5417", pinyin: "ma", meaning: "question particle" }
        ],
        grammarNote: "This is a common phrase to check if someone understands you. 'æ„æ€' means 'meaning' or 'what someone means'. 'å—' at the end turns the statement into a yes/no question."
    },
    {
        chinese: "\u6211\u5E74\u8F7B\u7684\u65F6\u5019\u53BB\u8FC7\u4E2D\u56FD\u3002",
        pinyin: "W\u01D2 ni\u00E1nq\u012Bng de sh\u00EDh\u00F2u q\u00F9gu\u00F2 zh\u014Dnggu\u00F3.",
        english: "I have been to China when I was young.",
        vocabulary: [
            { hanzi: "\u6211", pinyin: "w\u01D2", meaning: "I, me" },
            { hanzi: "\u5E74\u8F7B", pinyin: "ni\u00E1nq\u012Bng", meaning: "young" },
            { hanzi: "\u7684\u65F6\u5019", pinyin: "de sh\u00EDh\u00F2u", meaning: "when, at the time of" },
            { hanzi: "\u53BB\u8FC7", pinyin: "q\u00F9gu\u00F2", meaning: "have been to (past experience)" },
            { hanzi: "\u4E2D\u56FD", pinyin: "zh\u014Dnggu\u00F3", meaning: "China" }
        ],
        grammarNote: "'çš„æ—¶å€™' means 'when' or 'at the time of'. 'åŽ»è¿‡' uses 'è¿‡' to indicate past experience - that you've been somewhere before. This differs from 'åŽ»äº†' which just indicates you went somewhere."
    },
    {
        chinese: "\u6211\u4ECE\u6765\u6CA1\u53BB\u8FC7\u3002",
        pinyin: "W\u01D2 c\u00F3ngl\u00E1i m\u00E9i q\u00F9gu\u00F2.",
        english: "I have never been (to somewhere).",
        vocabulary: [
            { hanzi: "\u6211", pinyin: "w\u01D2", meaning: "I, me" },
            { hanzi: "\u4ECE\u6765", pinyin: "c\u00F3ngl\u00E1i", meaning: "never, always (with negation)" },
            { hanzi: "\u6CA1", pinyin: "m\u00E9i", meaning: "not, haven't" },
            { hanzi: "\u53BB\u8FC7", pinyin: "q\u00F9gu\u00F2", meaning: "have been to" }
        ],
        grammarNote: "'ä»Žæ¥æ²¡' or 'ä»Žæ¥ä¸' means 'never' or 'have never'. It emphasizes that something has never happened from the beginning until now. 'åŽ»è¿‡' with 'æ²¡' becomes 'have never been to'."
    },
    {
        chinese: "\u6211\u53EF\u4EE5\u8BD5\u4E00\u4E0B\u5417\uFF1F",
        pinyin: "W\u01D2 k\u011By\u01D0 sh\u00EC y\u00EDxi\u00E0 ma?",
        english: "May I give it a try?",
        vocabulary: [
            { hanzi: "\u6211", pinyin: "w\u01D2", meaning: "I, me" },
            { hanzi: "\u53EF\u4EE5", pinyin: "k\u011By\u01D0", meaning: "can, may" },
            { hanzi: "\u8BD5", pinyin: "sh\u00EC", meaning: "to try, to test" },
            { hanzi: "\u4E00\u4E0B", pinyin: "y\u00EDxi\u00E0", meaning: "a bit, briefly" },
            { hanzi: "\u5417", pinyin: "ma", meaning: "question particle" }
        ],
        grammarNote: "'è¯•ä¸€ä¸‹' means 'try it briefly' or 'give it a try'. The 'ä¸€ä¸‹' softens the request. This is a polite way to ask permission to try something."
    },
    {
        chinese: "\u8BA9\u6211\u60F3\u4E00\u60F3\u3002",
        pinyin: "R\u00E0ng w\u01D2 xi\u01CEng y\u00EC xi\u01CEng.",
        english: "Let me think./I'm trying to think.",
        vocabulary: [
            { hanzi: "\u8BA9", pinyin: "r\u00E0ng", meaning: "to let, to allow" },
            { hanzi: "\u6211", pinyin: "w\u01D2", meaning: "I, me" },
            { hanzi: "\u60F3\u4E00\u60F3", pinyin: "xi\u01CEng y\u00EC xi\u01CEng", meaning: "think for a bit" }
        ],
        grammarNote: "'è®©' means 'let' or 'allow'. The pattern 'verb + ä¸€ + verb' (like æƒ³ä¸€æƒ³) indicates doing the action briefly or casually. It softens the tone and suggests a quick action."
    },
    {
        chinese: "\u4F60\u8FD8\u6709\u4EC0\u4E48\u60F3\u8BF4\u7684\u5417\uFF1F",
        pinyin: "N\u01D0 h\u00E1i y\u01D2u sh\u00E9nme xi\u01CEng shu\u014D de ma?",
        english: "Do you have anything else to say?",
        vocabulary: [
            { hanzi: "\u4F60", pinyin: "n\u01D0", meaning: "you" },
            { hanzi: "\u8FD8", pinyin: "h\u00E1i", meaning: "still, also, else" },
            { hanzi: "\u6709", pinyin: "y\u01D2u", meaning: "have" },
            { hanzi: "\u4EC0\u4E48", pinyin: "sh\u00E9nme", meaning: "what, anything" },
            { hanzi: "\u60F3\u8BF4\u7684", pinyin: "xi\u01CEng shu\u014D de", meaning: "want to say" },
            { hanzi: "\u5417", pinyin: "ma", meaning: "question particle" }
        ],
        grammarNote: "'è¿˜æœ‰' means 'still have' or 'also have'. The pattern 'verb + çš„' (æƒ³è¯´çš„) turns the verb phrase into a noun phrase, meaning 'things you want to say'. 'è¿˜' here means 'else' or 'more'."
    },
    {
        chinese: "\u5DEE\u4E0D\u591A\u5C31\u8FD9\u6837\u3002",
        pinyin: "Ch\u00E0b\u00F9du\u014D ji\u00F9 zh\u00E8y\u00E0ng.",
        english: "That's about it.",
        vocabulary: [
            { hanzi: "\u5DEE\u4E0D\u591A", pinyin: "ch\u00E0b\u00F9du\u014D", meaning: "almost, about" },
            { hanzi: "\u5C31", pinyin: "ji\u00F9", meaning: "just, only" },
            { hanzi: "\u8FD9\u6837", pinyin: "zh\u00E8y\u00E0ng", meaning: "like this, this way" }
        ],
        grammarNote: "'å·®ä¸å¤š' means 'almost' or 'about'. 'å°±è¿™æ ·' means 'just like this' or 'that's it'. Together, this phrase is used to conclude or summarize, meaning 'that's pretty much it' or 'that's about all'."
    },
    {
        chinese: "\u6211\u60F3\u544A\u8BC9\u4F60\u4E00\u4EF6\u4E8B\u3002",
        pinyin: "W\u01D2 xi\u01CEng g\u00E0os\u00F9 n\u01D0 y\u012B ji\u00E0n sh\u00EC.",
        english: "I want to tell you something.",
        vocabulary: [
            { hanzi: "\u6211", pinyin: "w\u01D2", meaning: "I, me" },
            { hanzi: "\u60F3", pinyin: "xi\u01CEng", meaning: "to want, to think" },
            { hanzi: "\u544A\u8BC9", pinyin: "g\u00E0os\u00F9", meaning: "to tell" },
            { hanzi: "\u4F60", pinyin: "n\u01D0", meaning: "you" },
            { hanzi: "\u4E00\u4EF6\u4E8B", pinyin: "y\u012B ji\u00E0n sh\u00EC", meaning: "one thing, something" }
        ],
        grammarNote: "'ä¸€ä»¶äº‹' literally means 'one piece of matter/thing'. 'ä»¶' is the measure word for matters or affairs. This is a common way to say 'something' or 'a matter' in Chinese."
    },
    {
        chinese: "\u6211\u5F85\u4F1A\u513F\u7ED9\u4F60\u6253\u7535\u8BDD\u3002",
        pinyin: "W\u01D2 d\u0101i hu\u01D0 er g\u011Bi n\u01D0 d\u01CE di\u00E0nhu\u00E0.",
        english: "I'll call you later.",
        vocabulary: [
            { hanzi: "\u6211", pinyin: "w\u01D2", meaning: "I, me" },
            { hanzi: "\u5F85\u4F1A\u513F", pinyin: "d\u0101i hu\u01D0 er", meaning: "in a moment, later" },
            { hanzi: "\u7ED9", pinyin: "g\u011Bi", meaning: "to give, to (indirect object)" },
            { hanzi: "\u4F60", pinyin: "n\u01D0", meaning: "you" },
            { hanzi: "\u6253\u7535\u8BDD", pinyin: "d\u01CE di\u00E0nhu\u00E0", meaning: "to make a phone call" }
        ],
        grammarNote: "'å¾…ä¼šå„¿' is a colloquial way to say 'in a bit' or 'later'. 'ç»™ä½ æ‰“ç”µè¯' literally means 'give you make phone call', where 'ç»™' indicates the recipient. 'æ‰“ç”µè¯' is the standard verb for calling someone."
    },
    {
        chinese: "\u6211\u5230\u65F6\u5019\u7ED9\u4F60\u53D1\u5FAE\u4FE1\u3002",
        pinyin: "W\u01D2 d\u00E0o sh\u00EDh\u00F2u g\u011Bi n\u01D0 f\u0101 w\u0113ix\u00ECn.",
        english: "I will send you a WeChat message later.",
        vocabulary: [
            { hanzi: "\u6211", pinyin: "w\u01D2", meaning: "I, me" },
            { hanzi: "\u5230\u65F6\u5019", pinyin: "d\u00E0o sh\u00EDh\u00F2u", meaning: "when the time comes, at that time" },
            { hanzi: "\u7ED9", pinyin: "g\u011Bi", meaning: "to give, to (indirect object)" },
            { hanzi: "\u4F60", pinyin: "n\u01D0", meaning: "you" },
            { hanzi: "\u53D1", pinyin: "f\u0101", meaning: "to send" },
            { hanzi: "\u5FAE\u4FE1", pinyin: "w\u0113ix\u00ECn", meaning: "WeChat" }
        ],
        grammarNote: "'åˆ°æ—¶å€™' means 'when the time comes' or 'at that time'. It refers to a specific time in the future. 'å‘å¾®ä¿¡' means 'send a WeChat message', where 'å‘' is the verb for sending messages or posts."
    },
    {
        chinese: "\u8FD9\u4E2A\u661F\u671F\u6211\u5FD9\u6B7B\u4E86\u3002",
        pinyin: "Zh\u00E8ge x\u012Bngq\u012B w\u01D2 m\u00E1ng s\u01D0le.",
        english: "I've been buried with work this week.",
        vocabulary: [
            { hanzi: "\u8FD9\u4E2A", pinyin: "zh\u00E8ge", meaning: "this" },
            { hanzi: "\u661F\u671F", pinyin: "x\u012Bngq\u012B", meaning: "week" },
            { hanzi: "\u6211", pinyin: "w\u01D2", meaning: "I, me" },
            { hanzi: "\u5FD9", pinyin: "m\u00E1ng", meaning: "busy" },
            { hanzi: "\u6B7B\u4E86", pinyin: "s\u01D0le", meaning: "extremely (literally 'to death')" }
        ],
        grammarNote: "'å¿™æ­»äº†' literally means 'busy to death' and is used to express being extremely busy. The pattern 'adjective + æ­»äº†' is a common way to intensify adjectives, similar to saying 'extremely' or 'to death' in English."
    },
    {
        chinese: "\u6211\u5F00\u8F66\u53BB\u63A5\u4F60\u5427\u3002",
        pinyin: "W\u01D2 k\u0101ich\u0113 q\u00F9 ji\u0113 n\u01D0 ba.",
        english: "I'll pick you up by car.",
        vocabulary: [
            { hanzi: "\u6211", pinyin: "w\u01D2", meaning: "I, me" },
            { hanzi: "\u5F00\u8F66", pinyin: "k\u0101ich\u0113", meaning: "to drive (a car)" },
            { hanzi: "\u53BB", pinyin: "q\u00F9", meaning: "to go" },
            { hanzi: "\u63A5", pinyin: "ji\u0113", meaning: "to pick up, to meet" },
            { hanzi: "\u4F60", pinyin: "n\u01D0", meaning: "you" },
            { hanzi: "\u5427", pinyin: "ba", meaning: "particle (suggestion)" }
        ],
        grammarNote: "'å¼€è½¦' literally means 'drive car'. 'åŽ»æŽ¥ä½ ' means 'go pick you up'. The final 'å§' is a particle that softens the statement into a suggestion, like saying 'let me' or 'I'll' in a friendly way."
    },
    {
        chinese: "ä½ å¯ä»¥å†è¯´ä¸€æ¬¡å—ï¼Ÿ",
        pinyin: "NÇ kÄ›yÇ zÃ i shuÅ yÄ«cÃ¬ ma?",
        english: "Can you say that again?",
        vocabulary: [
            { hanzi: "ä½ ", pinyin: "nÇ", meaning: "you" },
            { hanzi: "å¯ä»¥", pinyin: "kÄ›yÇ", meaning: "can, may" },
            { hanzi: "å†", pinyin: "zÃ i", meaning: "again" },
            { hanzi: "è¯´", pinyin: "shuÅ", meaning: "to say, to speak" },
            { hanzi: "ä¸€æ¬¡", pinyin: "yÄ«cÃ¬", meaning: "one time, once" },
            { hanzi: "å—", pinyin: "ma", meaning: "question particle" }
        ],
        grammarNote: "'å†' means 'again' for future actions. The pattern 'å† + verb + ä¸€æ¬¡' means 'do something one more time' or 'again'. This is a polite way to ask someone to repeat themselves."
    },
    {
        chinese: "ä½ åƒå¾—æƒ¯ä¸­å›½èœå—ï¼Ÿ",
        pinyin: "NÇ chÄ« de guÃ n zhÅngguÃ³ cÃ i ma?",
        english: "Are you accustomed to eating Chinese food?",
        vocabulary: [
            { hanzi: "ä½ ", pinyin: "nÇ", meaning: "you" },
            { hanzi: "åƒ", pinyin: "chÄ«", meaning: "to eat" },
            { hanzi: "å¾—æƒ¯", pinyin: "de guÃ n", meaning: "accustomed to, used to" },
            { hanzi: "ä¸­å›½èœ", pinyin: "zhÅngguÃ³ cÃ i", meaning: "Chinese food" },
            { hanzi: "å—", pinyin: "ma", meaning: "question particle" }
        ],
        grammarNote: "'å¾—æƒ¯' (de guÃ n) means 'to be accustomed to' or 'to be used to'. The pattern 'verb + å¾—æƒ¯' asks if someone is comfortable with or used to doing something."
    },
    {
        chinese: "æ”¹å¤©ä¸€èµ·åƒé¥­å§ã€‚",
        pinyin: "GÇŽitiÄn yÄ«qÇ chÄ«fÃ n ba.",
        english: "Let's have a meal together someday.",
        vocabulary: [
            { hanzi: "æ”¹å¤©", pinyin: "gÇŽitiÄn", meaning: "another day, someday" },
            { hanzi: "ä¸€èµ·", pinyin: "yÄ«qÇ", meaning: "together" },
            { hanzi: "åƒé¥­", pinyin: "chÄ«fÃ n", meaning: "to eat (a meal)" },
            { hanzi: "å§", pinyin: "ba", meaning: "particle (suggestion)" }
        ],
        grammarNote: "'æ”¹å¤©' literally means 'change day' and is used to mean 'another day' or 'some other time'. 'å§' at the end makes it a friendly suggestion."
    },
    {
        chinese: "è¿™ä¸ªèœå‘³é“æ€Žä¹ˆæ ·ï¼Ÿ",
        pinyin: "ZhÃ¨ge cÃ i wÃ¨idÃ o zÄ›nmeyÃ ng?",
        english: "How does this dish taste?",
        vocabulary: [
            { hanzi: "è¿™ä¸ª", pinyin: "zhÃ¨ge", meaning: "this" },
            { hanzi: "èœ", pinyin: "cÃ i", meaning: "dish, food, vegetable" },
            { hanzi: "å‘³é“", pinyin: "wÃ¨idÃ o", meaning: "taste, flavor" },
            { hanzi: "æ€Žä¹ˆæ ·", pinyin: "zÄ›nmeyÃ ng", meaning: "how, how about" }
        ],
        grammarNote: "'å‘³é“' means 'taste' or 'flavor'. 'æ€Žä¹ˆæ ·' is used to ask 'how is it' or 'what do you think'. This is a common way to ask someone's opinion about food."
    },
    {
        chinese: "æˆ‘ä»¬æ‰¾ä¸ªåœ°æ–¹åƒé¥­å§ã€‚",
        pinyin: "WÇ’men zhÇŽo gÃ¨ dÃ¬fÄng chÄ«fÃ n ba.",
        english: "Let's find a place to eat.",
        vocabulary: [
            { hanzi: "æˆ‘ä»¬", pinyin: "wÇ’men", meaning: "we, us" },
            { hanzi: "æ‰¾", pinyin: "zhÇŽo", meaning: "to look for, to find" },
            { hanzi: "ä¸ª", pinyin: "gÃ¨", meaning: "measure word (general)" },
            { hanzi: "åœ°æ–¹", pinyin: "dÃ¬fÄng", meaning: "place, location" },
            { hanzi: "åƒé¥­", pinyin: "chÄ«fÃ n", meaning: "to eat (a meal)" },
            { hanzi: "å§", pinyin: "ba", meaning: "particle (suggestion)" }
        ],
        grammarNote: "'æ‰¾' means 'to look for' or 'to find'. The pattern 'æ‰¾ä¸ªåœ°æ–¹' means 'find a place'. 'å§' makes it a suggestion like 'let's'."
    },
    {
        chinese: "æˆ‘ä»¬ç‚¹å¤–å–å§ã€‚",
        pinyin: "WÇ’men diÇŽn wÃ imÃ i ba.",
        english: "Let's order takeout.",
        vocabulary: [
            { hanzi: "æˆ‘ä»¬", pinyin: "wÇ’men", meaning: "we, us" },
            { hanzi: "ç‚¹", pinyin: "diÇŽn", meaning: "to order (food)" },
            { hanzi: "å¤–å–", pinyin: "wÃ imÃ i", meaning: "takeout, delivery food" },
            { hanzi: "å§", pinyin: "ba", meaning: "particle (suggestion)" }
        ],
        grammarNote: "'ç‚¹' in this context means 'to order' food. 'å¤–å–' literally means 'outside sell' and refers to takeout or food delivery. Very common phrase in modern Chinese!"
    },
    {
        chinese: "ä»Šå¤©å¤©æ°”çœŸå¥½å•Šã€‚",
        pinyin: "JÄ«ntiÄn tiÄnqÃ¬ zhÄ“n hÇŽo a.",
        english: "Nice weather today.",
        vocabulary: [
            { hanzi: "ä»Šå¤©", pinyin: "jÄ«ntiÄn", meaning: "today" },
            { hanzi: "å¤©æ°”", pinyin: "tiÄnqÃ¬", meaning: "weather" },
            { hanzi: "çœŸ", pinyin: "zhÄ“n", meaning: "really, truly" },
            { hanzi: "å¥½", pinyin: "hÇŽo", meaning: "good, nice" },
            { hanzi: "å•Š", pinyin: "a", meaning: "particle (emphasis/exclamation)" }
        ],
        grammarNote: "'çœŸ' means 'really' or 'truly' and adds emphasis. 'å•Š' at the end is an exclamatory particle that makes the statement more casual and emotional."
    },
    {
        chinese: "ä»Šå¤©æ²¡æœ‰æ˜¨å¤©é‚£ä¹ˆå†·ã€‚",
        pinyin: "JÄ«ntiÄn mÃ©iyÇ’u zuÃ³tiÄn nÃ me lÄ›ng.",
        english: "Today is not as cold as yesterday.",
        vocabulary: [
            { hanzi: "ä»Šå¤©", pinyin: "jÄ«ntiÄn", meaning: "today" },
            { hanzi: "æ²¡æœ‰", pinyin: "mÃ©iyÇ’u", meaning: "not as, don't have" },
            { hanzi: "æ˜¨å¤©", pinyin: "zuÃ³tiÄn", meaning: "yesterday" },
            { hanzi: "é‚£ä¹ˆ", pinyin: "nÃ me", meaning: "so, that" },
            { hanzi: "å†·", pinyin: "lÄ›ng", meaning: "cold" }
        ],
        grammarNote: "The pattern 'A + æ²¡æœ‰ + B + é‚£ä¹ˆ + adjective' means 'A is not as [adjective] as B'. This is a common comparison structure in Chinese."
    },
    {
        chinese: "ä½ åˆ«æŠŠå¥¹çš„ä¸œè¥¿å¼„åäº†ã€‚",
        pinyin: "NÇ biÃ© bÇŽ tÄ de dÅngxi nÃ²ng huÃ ile.",
        english: "Don't break her things.",
        vocabulary: [
            { hanzi: "ä½ ", pinyin: "nÇ", meaning: "you" },
            { hanzi: "åˆ«", pinyin: "biÃ©", meaning: "don't" },
            { hanzi: "æŠŠ", pinyin: "bÇŽ", meaning: "particle (indicates disposal)" },
            { hanzi: "å¥¹çš„", pinyin: "tÄ de", meaning: "her" },
            { hanzi: "ä¸œè¥¿", pinyin: "dÅngxi", meaning: "things, stuff" },
            { hanzi: "å¼„å", pinyin: "nÃ²ng huÃ i", meaning: "to break, to damage" },
            { hanzi: "äº†", pinyin: "le", meaning: "particle (completion)" }
        ],
        grammarNote: "The 'æŠŠ' construction is used when an action disposes of, handles, or affects an object. The pattern is 'subject + æŠŠ + object + verb + result'. 'åˆ«' means 'don't' for commands."
    },
    {
        chinese: "ä½ å¿«ç‚¹å•Šï¼",
        pinyin: "NÇ kuÃ i diÇŽn a!",
        english: "Hurry up!",
        vocabulary: [
            { hanzi: "ä½ ", pinyin: "nÇ", meaning: "you" },
            { hanzi: "å¿«", pinyin: "kuÃ i", meaning: "fast, quick" },
            { hanzi: "ç‚¹", pinyin: "diÇŽn", meaning: "a bit, a little" },
            { hanzi: "å•Š", pinyin: "a", meaning: "particle (emphasis/urgency)" }
        ],
        grammarNote: "'å¿«ç‚¹' literally means 'fast a little' and is the standard way to say 'hurry up'. The 'å•Š' adds urgency or emphasis to the command."
    },
    {
        chinese: "æˆ‘æ¥å§ã€‚",
        pinyin: "WÇ’ lÃ¡i ba.",
        english: "I'll do it./Let me do it.",
        vocabulary: [
            { hanzi: "æˆ‘", pinyin: "wÇ’", meaning: "I, me" },
            { hanzi: "æ¥", pinyin: "lÃ¡i", meaning: "to come; to do (colloquial)" },
            { hanzi: "å§", pinyin: "ba", meaning: "particle (suggestion)" }
        ],
        grammarNote: "'æ¥' here doesn't mean 'come' but rather 'to do (something)'. 'æˆ‘æ¥' is a common way to volunteer to do something. The 'å§' makes it a gentle offer."
    },
    {
        chinese: "è¿™ä¸ªä¹Ÿå¤ªè´µäº†å§ï¼",
        pinyin: "ZhÃ¨ge yÄ› tÃ i guÃ¬le ba!",
        english: "This is too expensive!",
        vocabulary: [
            { hanzi: "è¿™ä¸ª", pinyin: "zhÃ¨ge", meaning: "this" },
            { hanzi: "ä¹Ÿ", pinyin: "yÄ›", meaning: "also, too" },
            { hanzi: "å¤ª", pinyin: "tÃ i", meaning: "too, excessively" },
            { hanzi: "è´µ", pinyin: "guÃ¬", meaning: "expensive" },
            { hanzi: "äº†", pinyin: "le", meaning: "particle (excessive degree)" },
            { hanzi: "å§", pinyin: "ba", meaning: "particle (emphasis)" }
        ],
        grammarNote: "'ä¹Ÿå¤ª...äº†' is an emphatic pattern meaning 'way too' or 'really too'. The 'ä¹Ÿ' adds emphasis. 'å§' at the end expresses strong feeling or surprise."
    },
    {
        chinese: "åˆ«å¿˜äº†å¸¦ä¼žå•Šï¼",
        pinyin: "BiÃ© wÃ ngle dÃ i sÇŽn a!",
        english: "Don't forget to bring an umbrella!",
        vocabulary: [
            { hanzi: "åˆ«", pinyin: "biÃ©", meaning: "don't" },
            { hanzi: "å¿˜äº†", pinyin: "wÃ ngle", meaning: "to forget" },
            { hanzi: "å¸¦", pinyin: "dÃ i", meaning: "to bring, to carry" },
            { hanzi: "ä¼ž", pinyin: "sÇŽn", meaning: "umbrella" },
            { hanzi: "å•Š", pinyin: "a", meaning: "particle (emphasis/reminder)" }
        ],
        grammarNote: "'åˆ«' is used for negative commands meaning 'don't'. 'äº†' after 'å¿˜' indicates completion. 'å•Š' adds a friendly reminder tone."
    },
    {
        chinese: "å¤–é¢ä¸‹é›ªäº†ï¼",
        pinyin: "WÃ imiÃ n xiÃ  xuÄ›le!",
        english: "It's snowing outside!",
        vocabulary: [
            { hanzi: "å¤–é¢", pinyin: "wÃ imiÃ n", meaning: "outside" },
            { hanzi: "ä¸‹é›ª", pinyin: "xiÃ  xuÄ›", meaning: "to snow" },
            { hanzi: "äº†", pinyin: "le", meaning: "particle (change of state)" }
        ],
        grammarNote: "'ä¸‹é›ª' literally means 'fall snow'. The 'äº†' indicates a change of state - it wasn't snowing before, but now it is. This pattern is used for weather changes."
    },
    {
        chinese: "è¿™æœ¬ä¹¦è®²ä»€ä¹ˆçš„å•Šï¼Ÿ",
        pinyin: "ZhÃ¨ bÄ›n shÅ« jiÇŽng shÃ©nme de a?",
        english: "What is this book about?",
        vocabulary: [
            { hanzi: "è¿™æœ¬", pinyin: "zhÃ¨ bÄ›n", meaning: "this (measure word for books)" },
            { hanzi: "ä¹¦", pinyin: "shÅ«", meaning: "book" },
            { hanzi: "è®²", pinyin: "jiÇŽng", meaning: "to talk about, to discuss" },
            { hanzi: "ä»€ä¹ˆ", pinyin: "shÃ©nme", meaning: "what" },
            { hanzi: "çš„", pinyin: "de", meaning: "particle" },
            { hanzi: "å•Š", pinyin: "a", meaning: "particle (question)" }
        ],
        grammarNote: "'è®²ä»€ä¹ˆçš„' is a colloquial way to ask 'what is it about'. The 'çš„' makes it into a noun phrase. 'å•Š' softens the question."
    },
    {
        chinese: "ä¸‹ä¸ªæ˜ŸæœŸæˆ‘ä¸åœ¨è¿™é‡Œã€‚",
        pinyin: "XiÃ  ge xÄ«ngqÄ« wÇ’ bÃº zÃ i zhÃ¨lÇ.",
        english: "I'm not here next week.",
        vocabulary: [
            { hanzi: "ä¸‹ä¸ª", pinyin: "xiÃ  ge", meaning: "next" },
            { hanzi: "æ˜ŸæœŸ", pinyin: "xÄ«ngqÄ«", meaning: "week" },
            { hanzi: "æˆ‘", pinyin: "wÇ’", meaning: "I, me" },
            { hanzi: "ä¸åœ¨", pinyin: "bÃº zÃ i", meaning: "not be (at a place)" },
            { hanzi: "è¿™é‡Œ", pinyin: "zhÃ¨lÇ", meaning: "here" }
        ],
        grammarNote: "'ä¸‹ä¸ªæ˜ŸæœŸ' means 'next week'. 'ä¸åœ¨' specifically means 'not be present at a location', different from 'æ²¡æœ‰' which means 'don't have'."
    },
    {
        chinese: "é‚£é‡Œäººå¤ªå¤šäº†ã€‚",
        pinyin: "NÃ lÇ rÃ©n tÃ i duÅle.",
        english: "There are too many people there.",
        vocabulary: [
            { hanzi: "é‚£é‡Œ", pinyin: "nÃ lÇ", meaning: "there" },
            { hanzi: "äºº", pinyin: "rÃ©n", meaning: "people, person" },
            { hanzi: "å¤ª", pinyin: "tÃ i", meaning: "too, excessively" },
            { hanzi: "å¤š", pinyin: "duÅ", meaning: "many, much" },
            { hanzi: "äº†", pinyin: "le", meaning: "particle (excessive degree)" }
        ],
        grammarNote: "The pattern 'place + noun + adjective' describes a situation at a location. 'å¤ª...äº†' emphasizes that something is excessive."
    },
    {
        chinese: "æˆ‘ä¸æ˜¯æ•…æ„çš„ã€‚",
        pinyin: "WÇ’ bÃºshÃ¬ gÃ¹yÃ¬ de.",
        english: "I did not do it on purpose.",
        vocabulary: [
            { hanzi: "æˆ‘", pinyin: "wÇ’", meaning: "I, me" },
            { hanzi: "ä¸æ˜¯", pinyin: "bÃºshÃ¬", meaning: "am not, is not" },
            { hanzi: "æ•…æ„", pinyin: "gÃ¹yÃ¬", meaning: "on purpose, intentional" },
            { hanzi: "çš„", pinyin: "de", meaning: "particle" }
        ],
        grammarNote: "'ä¸æ˜¯...çš„' emphasizes what something is not. 'æ•…æ„' means 'on purpose' or 'intentionally'. This is a common apology phrase."
    },
    {
        chinese: "æˆ‘ä»¬ååœ°é“åŽ»å§ã€‚",
        pinyin: "WÇ’men zuÃ² dÃ¬tiÄ› qÃ¹ ba.",
        english: "Let's go by subway.",
        vocabulary: [
            { hanzi: "æˆ‘ä»¬", pinyin: "wÇ’men", meaning: "we, us" },
            { hanzi: "å", pinyin: "zuÃ²", meaning: "to sit; to take (transportation)" },
            { hanzi: "åœ°é“", pinyin: "dÃ¬tiÄ›", meaning: "subway, metro" },
            { hanzi: "åŽ»", pinyin: "qÃ¹", meaning: "to go" },
            { hanzi: "å§", pinyin: "ba", meaning: "particle (suggestion)" }
        ],
        grammarNote: "'å' is used for taking transportation. 'åœ°é“' literally means 'ground iron'. The pattern 'verb + transportation + åŽ»' means 'go by [transportation]'."
    },
    {
        chinese: "æ”¾å‡åŽ»å“ªé‡ŒçŽ©å•Šï¼Ÿ",
        pinyin: "FÃ ngjiÃ  qÃ¹ nÇŽlÇ wÃ¡n a?",
        english: "Where are you planning to go for the holiday?",
        vocabulary: [
            { hanzi: "æ”¾å‡", pinyin: "fÃ ngjiÃ ", meaning: "to have a holiday/vacation" },
            { hanzi: "åŽ»", pinyin: "qÃ¹", meaning: "to go" },
            { hanzi: "å“ªé‡Œ", pinyin: "nÇŽlÇ", meaning: "where" },
            { hanzi: "çŽ©", pinyin: "wÃ¡n", meaning: "to play, to have fun" },
            { hanzi: "å•Š", pinyin: "a", meaning: "particle (question)" }
        ],
        grammarNote: "'æ”¾å‡' means 'have a holiday' or 'be on vacation'. 'çŽ©' here means 'to have fun' or 'to visit'. The 'å•Š' makes it a casual, friendly question."
    },
    {
        chinese: "ä½ çš„ç‹—ç‹—å¥½å¯çˆ±å•Šï¼",
        pinyin: "NÇ de gÇ’ugou hÇŽo kÄ›'Ã i a!",
        english: "Your dog is so cute!",
        vocabulary: [
            { hanzi: "ä½ çš„", pinyin: "nÇ de", meaning: "your" },
            { hanzi: "ç‹—ç‹—", pinyin: "gÇ’ugou", meaning: "dog, doggy (affectionate)" },
            { hanzi: "å¥½", pinyin: "hÇŽo", meaning: "very, so" },
            { hanzi: "å¯çˆ±", pinyin: "kÄ›'Ã i", meaning: "cute, adorable" },
            { hanzi: "å•Š", pinyin: "a", meaning: "particle (exclamation)" }
        ],
        grammarNote: "'ç‹—ç‹—' is an affectionate way to say 'dog', like 'doggy'. 'å¥½' before an adjective means 'very' or 'so'. 'å•Š' adds emotional emphasis to the exclamation."
    }
];

// Progress tracking with localStorage
var learnedCards = JSON.parse(localStorage.getItem('learnedCards') || '{}');
var currentFilter = 'all'; // 'all', 'unlearned', 'learned'
var filteredIndices = [];

var currentIndex = 0;
var isFlipped = false;
var showVocab = false;

var flashcard    = document.getElementById('flashcard');
var cardLabel    = document.getElementById('cardLabel');
var cardMain     = document.getElementById('cardMain');
var cardHint     = document.getElementById('cardHint');
var cardSelect   = document.getElementById('cardSelect');
var prevBtn      = document.getElementById('prevBtn');
var nextBtn      = document.getElementById('nextBtn');
var vocabBtn     = document.getElementById('vocabBtn');
var vocabSection = document.getElementById('vocabSection');
var vocabItems   = document.getElementById('vocabItems');
var grammarNote  = document.getElementById('grammarNote');
var learnedToggle = document.getElementById('learnedToggle');
var filterAll     = document.getElementById('filterAll');
var filterUnlearned = document.getElementById('filterUnlearned');
var filterLearned = document.getElementById('filterLearned');

function getCardId(index) {
    return cards[index].chinese;
}

function isCardLearned(index) {
    return learnedCards[getCardId(index)] === true;
}

function toggleCardLearned(index) {
    var cardId = getCardId(index);
    if (learnedCards[cardId]) {
        delete learnedCards[cardId];
    } else {
        learnedCards[cardId] = true;
    }
    localStorage.setItem('learnedCards', JSON.stringify(learnedCards));
}

function updateFilteredIndices() {
    filteredIndices = [];
    for (var i = 0; i < cards.length; i++) {
        if (currentFilter === 'all') {
            filteredIndices.push(i);
        } else if (currentFilter === 'unlearned' && !isCardLearned(i)) {
            filteredIndices.push(i);
        } else if (currentFilter === 'learned' && isCardLearned(i)) {
            filteredIndices.push(i);
        }
    }
    
    // Reset to first card in filtered list
    if (filteredIndices.length > 0) {
        currentIndex = 0;
    }
    
    // Update dropdown
    cardSelect.innerHTML = '';
    filteredIndices.forEach(function(realIndex, displayIndex) {
        var opt = document.createElement('option');
        opt.value = displayIndex;
        var learned = isCardLearned(realIndex) ? ' âœ“' : '';
        opt.textContent = 'Card ' + (displayIndex + 1) + ' of ' + filteredIndices.length + learned;
        cardSelect.appendChild(opt);
    });
}

function getCurrentRealIndex() {
    return filteredIndices[currentIndex] || 0;
}

function render() {
    var realIndex = getCurrentRealIndex();
    var card = cards[realIndex];
    var learned = isCardLearned(realIndex);
    
    cardSelect.value = currentIndex;
    flashcard.classList.toggle('flipped', isFlipped);

    if (!isFlipped) {
        cardLabel.textContent = 'FRONT';
        cardMain.innerHTML = '<div class="card-english">' + card.english + '</div>';
        cardHint.textContent = 'Click or swipe to flip';
    } else {
        cardLabel.textContent = 'BACK';
        cardMain.innerHTML = '<div class="card-chinese">' + card.chinese + '</div><div class="card-pinyin">' + card.pinyin + '</div>';
        cardHint.textContent = 'Click or swipe to flip back';
    }

    // Update learned toggle button
    if (learned) {
        learnedToggle.textContent = 'â†© Mark as Unlearned';
        learnedToggle.classList.add('learned');
    } else {
        learnedToggle.textContent = 'âœ“ Mark as Learned';
        learnedToggle.classList.remove('learned');
    }

    vocabSection.classList.toggle('visible', showVocab);
    vocabBtn.textContent = (showVocab ? '\uD83D\uDCDA Hide' : '\uD83D\uDCDA Show') + ' Vocabulary Notes';

    if (showVocab) {
        vocabItems.innerHTML = card.vocabulary.map(function(v) {
            return '<div class="vocab-item"><span class="vocab-hanzi">' + v.hanzi + '</span> <span class="vocab-pinyin">(' + v.pinyin + ')</span><span class="vocab-meaning"> = ' + v.meaning + '</span></div>';
        }).join('');
        grammarNote.innerHTML = '<strong>&#128161; Grammar Tip:</strong> ' + card.grammarNote;
    }
}

function goTo(index) {
    if (filteredIndices.length === 0) return;
    currentIndex = ((index % filteredIndices.length) + filteredIndices.length) % filteredIndices.length;
    isFlipped = false;
    showVocab = false;
    render();
}

function setFilter(filter) {
    currentFilter = filter;
    filterAll.classList.toggle('active', filter === 'all');
    filterUnlearned.classList.toggle('active', filter === 'unlearned');
    filterLearned.classList.toggle('active', filter === 'learned');
    updateFilteredIndices();
    render();
}

// Event listeners
learnedToggle.addEventListener('click', function() {
    var currentRealIndex = getCurrentRealIndex();
    toggleCardLearned(currentRealIndex);
    
    // Find the next real card index in the original array
    var nextRealIndex = currentRealIndex + 1;
    
    // Update filtered list with new learned status
    updateFilteredIndices();
    
    // Find where this next card appears in the NEW filtered list
    if (filteredIndices.length > 0) {
        var foundIndex = -1;
        
        // Try to find the next card in the filtered list
        for (var i = 0; i < filteredIndices.length; i++) {
            if (filteredIndices[i] === nextRealIndex) {
                foundIndex = i;
                break;
            }
        }
        
        // If next card is in the filtered list, go to it
        if (foundIndex !== -1) {
            currentIndex = foundIndex;
        }
        // Otherwise, stay at current position or wrap to start
        else {
            // If current position is still valid, stay there
            if (currentIndex >= filteredIndices.length) {
                currentIndex = 0; // Wrap to beginning
            }
            // else stay at currentIndex (shows whatever card is now at that position)
        }
    } else {
        currentIndex = 0;
    }
    
    // Always show front of next card
    isFlipped = false;
    showVocab = false;
    render();
});

filterAll.addEventListener('click', function() { setFilter('all'); });
filterUnlearned.addEventListener('click', function() { setFilter('unlearned'); });
filterLearned.addEventListener('click', function() { setFilter('learned'); });

// Click handled by touch on mobile; keep for desktop mouse clicks only
flashcard.addEventListener('click', function(e) {
    // Only fire on genuine mouse clicks, not touch-triggered synthetic clicks
    if (e.sourceCapabilities && !e.sourceCapabilities.firesTouchEvents) {
        isFlipped = !isFlipped;
        render();
    } else if (!e.sourceCapabilities) {
        // Fallback for browsers that don't support sourceCapabilities
        isFlipped = !isFlipped;
        render();
    }
});
prevBtn.addEventListener('click', function() { goTo(currentIndex - 1); });
nextBtn.addEventListener('click', function() { goTo(currentIndex + 1); });
cardSelect.addEventListener('change', function(e) { goTo(Number(e.target.value)); });
vocabBtn.addEventListener('click', function() { showVocab = !showVocab; render(); });

var touchStartX = null;
var touchStartY = null;
var touchEndX = null;
var touchEndY = null;
var touchMoved = false;
var touchHandled = false;
var touchStartTime = 0;
var MIN_SWIPE = 40;

flashcard.addEventListener('touchstart', function(e) {
    touchStartX = e.changedTouches[0].clientX;
    touchStartY = e.changedTouches[0].clientY;
    touchEndX = touchStartX;
    touchEndY = touchStartY;
    touchMoved = false;
    touchHandled = false;
    touchStartTime = Date.now();
}, { passive: true });

flashcard.addEventListener('touchmove', function(e) {
    touchEndX = e.changedTouches[0].clientX;
    touchEndY = e.changedTouches[0].clientY;
    var moved = Math.abs(touchEndX - touchStartX) > 5 || Math.abs(touchEndY - touchStartY) > 5;
    if (moved) touchMoved = true;
}, { passive: true });

flashcard.addEventListener('touchend', function(e) {
    if (touchStartX === null) return;

    var distX = touchStartX - touchEndX;
    var distY = touchStartY - touchEndY;
    var touchDuration = Date.now() - touchStartTime;

    // If barely moved and quick tap, treat as a tap -> flip
    if (!touchMoved && touchDuration < 500 && (Math.abs(distX) < MIN_SWIPE && Math.abs(distY) < MIN_SWIPE)) {
        e.preventDefault(); // CRITICAL for iOS
        isFlipped = !isFlipped;
        render();
        touchHandled = true;
        setTimeout(function() { touchHandled = false; }, 600);
    } else if (touchMoved && Math.abs(distX) >= MIN_SWIPE && Math.abs(distX) > Math.abs(distY)) {
        // Horizontal swipe -> navigate
        e.preventDefault();
        if (distX > 0) goTo(currentIndex + 1);
        else goTo(currentIndex - 1);
        touchHandled = true;
        setTimeout(function() { touchHandled = false; }, 600);
    }

    touchStartX = null; touchStartY = null;
    touchEndX = null; touchEndY = null;
    touchMoved = false;
}, { passive: false }); // NOT passive so we can preventDefault

// Handle click events (desktop only)
flashcard.addEventListener('click', function(e) {
    // Block ALL clicks that happen soon after touch
    if (touchHandled || Date.now() - touchStartTime < 600) {
        e.preventDefault();
        e.stopPropagation();
        return false;
    }
    
    // Desktop mouse click only
    isFlipped = !isFlipped;
    render();
}, false);

document.addEventListener('keydown', function(e) {
    if (e.key === 'ArrowRight') goTo(currentIndex + 1);
    else if (e.key === 'ArrowLeft') goTo(currentIndex - 1);
    else if (e.key === ' ' || e.key === 'Enter') { isFlipped = !isFlipped; render(); }
});

// Initialize
updateFilteredIndices();
render();
</script>
</body>
</html>
